<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://chris-lesage.github.io/theme/stylesheet/styles.css">

  <link rel="stylesheet" type="text/css" href="http://chris-lesage.github.io/theme/pygments/github.min.css">
  

    <link href="http://chris-lesage.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Rigmarole Blog Atom">


    <link rel="shortcut icon" href="/theme/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/theme/img/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Chris Lesage" />
<meta name="description" content="I have a script snippet to share with you today. This is how I quickly reset all selected objects to 0,0,0,0,0,0,1,1,1 in translate, rotate and scale with the stroke of a hotkey command. This is fantastically useful when you are animating! But it’s also for riggers, modellers or anyone working in Maya. Softimage XSI has this feature built in (Ctrl-Shift-R), so I made a little snippet to do the same in ..." />
<meta name="keywords" content="animtip, hotkeys, maya, pymel, python, rigtip">
<meta property="og:site_name" content="Rigmarole Blog"/>
<meta property="og:title" content="Maya Python: Reset Selected Controls"/>
<meta property="og:description" content="I have a script snippet to share with you today. This is how I quickly reset all selected objects to 0,0,0,0,0,0,1,1,1 in translate, rotate and scale with the stroke of a hotkey command. This is fantastically useful when you are animating! But it’s also for riggers, modellers or anyone working in Maya. Softimage XSI has this feature built in (Ctrl-Shift-R), so I made a little snippet to do the same in ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://chris-lesage.github.io/python/maya-python-reset-selected-controls/"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2013-10-01 21:54:00-04:00"/>
<meta property="article:modified_time" content="2013-10-01 21:54:00-04:00"/>
<meta property="article:author" content="http://chris-lesage.github.io/pages/about/">
<meta property="article:section" content="python"/>
<meta property="article:tag" content="animtip"/>
<meta property="article:tag" content="hotkeys"/>
<meta property="article:tag" content="maya"/>
<meta property="article:tag" content="pymel"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="rigtip"/>
<meta property="og:image" content="">
  <title>Rigmarole Blog &ndash; Maya Python: Reset Selected Controls</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://chris-lesage.github.io">
        <img src="http://chris-lesage.github.io/theme/img/logo_header.png" alt="" title=""><br>
        <img src="http://chris-lesage.github.io/theme/img/logo_text.png" alt="" title="">
      </a>
      <h1><a href="http://chris-lesage.github.io"></a></h1>
      <p></p>
      <nav>
        <ul class="list">
          <li><a href="/blog/">Blog</a></li>
              <li><a href="http://chris-lesage.github.io/pages/tech-artist-demoreel/">demoreel</a></li>
              <li><a href="http://chris-lesage.github.io/pages/about/">about</a></li>
              <li><a href="http://chris-lesage.github.io/pages/tools/">tools</a></li>
              <li><a href="http://chris-lesage.github.io/pages/now/">now</a></li>
        </ul>
      </nav>
      <ul class="social">
      </ul>
    </div>
  </aside>
  <main>

<article>
  <header>
    <div class="article_title">
    <img src ='flask-burner_64'>
    <h2><a href="http://chris-lesage.github.io/python/maya-python-reset-selected-controls/">Maya Python: Reset Selected&nbsp;Controls</a></h2>
    <p>Posted on 2013-10-01 - category: <a href="http://chris-lesage.github.io/category/python/">python</a></p>
    </div>
  </header>

    <p><img alt="Reset Selected Script" src="http://chrislesage.com/wp-content/uploads/2013/10/reset_selected_script.jpg" /></p>
<p>I have a script snippet to share with you today. This is how I quickly reset all selected objects to 0,0,0,0,0,0,1,1,1 in translate, rotate and scale with the stroke of a hotkey&nbsp;command.</p>
<p><strong>This is fantastically useful when you are animating!</strong> But it&#8217;s also for riggers, modellers or anyone working in Maya. Softimage <span class="caps">XSI</span> has this feature built in (Ctrl-Shift-R), so I made a little snippet to do the same in&nbsp;Maya.</p>
<p>First I&#8217;ll show the simple code, explicitly written for each attribute. And then for the Python fans, I&#8217;ll show how to shorten it using List Comprehension because why not? After the scripts, I&#8217;ll explain a bit more how it works. <strong>If you just want the script, just copy/paste this and use it. If you want to geek out about List Comprehension and PyMEL, read&nbsp;on&#8230;</strong></p>
<h3>Reset Selected: The simple&nbsp;version</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymel.core</span> <span class="kn">as</span> <span class="nn">pm</span>

<span class="k">def</span> <span class="nf">reset_selected</span><span class="p">(</span><span class="n">oColl</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">oNode</span> <span class="ow">in</span> <span class="n">oColl</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">ty</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">tz</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">ry</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">rz</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">sx</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">sy</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">oNode</span><span class="o">.</span><span class="n">sz</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

<span class="n">runthescipt</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">Callback</span><span class="p">(</span><span class="n">reset_selected</span><span class="p">,</span> <span class="n">pm</span><span class="o">.</span><span class="n">selected</span><span class="p">()</span> <span class="p">)</span>
<span class="n">runthescipt</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<h3>Reset Selected: The Fancy List Comprehension&nbsp;Version</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pymel.core</span> <span class="kn">as</span> <span class="nn">pm</span>

<span class="k">def</span> <span class="nf">reset_selected</span><span class="p">(</span><span class="n">oColl</span><span class="p">):</span>
    <span class="n">trList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.tx&#39;</span><span class="p">,</span><span class="s1">&#39;.ty&#39;</span><span class="p">,</span><span class="s1">&#39;.tz&#39;</span><span class="p">,</span><span class="s1">&#39;.rx&#39;</span><span class="p">,</span><span class="s1">&#39;.ry&#39;</span><span class="p">,</span><span class="s1">&#39;.rz&#39;</span><span class="p">]</span>
    <span class="n">sList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.sx&#39;</span><span class="p">,</span><span class="s1">&#39;.sy&#39;</span><span class="p">,</span><span class="s1">&#39;.sz&#39;</span><span class="p">]</span>

    <span class="c1"># o is each object, x is each attribute</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">o</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">oColl</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">trList</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">pm</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">attr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">attr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">o</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">oColl</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sList</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">pm</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">attr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">attr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

<span class="n">runthescipt</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">Callback</span><span class="p">(</span><span class="n">reset_selected</span><span class="p">,</span> <span class="n">pm</span><span class="o">.</span><span class="n">selected</span><span class="p">()</span> <span class="p">)</span>
<span class="n">runthescipt</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<h3>Notes about this&nbsp;script:</h3>
<ul>
<li><strong>Fully supports undo and redo</strong>.</li>
<li>There are 2 scripts below. Grab either one. <strong>They do the same thing</strong>.</li>
<li>Set it to <strong><em>Ctrl-Shift-R</em></strong> in your Maya hotkey editor. Don&#8217;t forget to set the hotkey to&nbsp;Python.</li>
<li>I personally use PyMEL instead of maya.cmds because it can generate a list of object pointers rather than strings, so it is a lot easier to use from an <span class="caps">OOP</span> point of view. Some studios do not use PyMEL, so be aware of&nbsp;this.</li>
<li><strong>The pm.Callback() takes an argument</strong>, so instead of pm.selected() you could pass it a list of all your character rig controls, or all the locators in your scene, etc.&nbsp;etc.</li>
<li>Every iteration has a try/except on it, so that if your attribute is driven or locked the script will continue without&nbsp;failing.</li>
<li>You can also use makeIdentity() to quickly reset an object, but if some of your attributes are locked, this won&#8217;t&nbsp;work.</li>
</ul>
<h3>How list comprehension&nbsp;works:</h3>
<ul>
<li><a href="http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions" title="List Comprehension documentation">List Comprehension</a> lets you build up lists quickly by using [x for x in&nbsp;y]</li>
<li>But you can also loop over two lists at once with one line:<br />
    [(x + y) for x in (1,2,3) y in&nbsp;(4,5,6)]</li>
<li>This acts like a nested iterator which will add each of (1,2,3) with each of (4,5,6) resulting in 9 combinations. (1+4, 1+5, 1+6, 2+4, 2+5, and so&nbsp;on&#8230;)</li>
<li>I then take those two combined elements to gather all the transform attributes for all of my&nbsp;objects.</li>
</ul>
<h3>How pm.Attribute&nbsp;works:</h3>
<ul>
<li>I&#8217;m iterating over two lists with my list comprehension so I need to combine it again, casting it as a pm.Attribute( object name + attribute&nbsp;).</li>
<li>However, if you were explicitly setting an attribute it would be as simple as&nbsp;yourObject.tx.set(0)</li>
<li>You could also create your attribute in the list comprehension, but if you try and run the script on a shape node that has no attributes, then the script will&nbsp;fail.</li>
<li>You could get around this by including a try/except function inside the list comprehension or by filtering your objects for transform nodes only, but that is just becoming too complex for this little&nbsp;script.</li>
</ul>
<h2>In&nbsp;Summary</h2>
<p>I use this hotkey all the time! I missed it from Softimage. Your animators are going to love using it too! Feel free to use it, and if you find bugs, improve it or rewrite it in <span class="caps">MEL</span> or maya.cmds let us know in the comments.&nbsp;Thanks!</p>
<hr />
<h2>Comments</h2>
<p><strong><a href="#86" title="2013-11-06 23:47:39">Markus Daum</a>:</strong> nice one! :) here&#8217;s a simple maya commands&nbsp;version&#8230; </p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">maya.cmds</span> <span class="kn">as</span> <span class="nn">mc</span>

<span class="n">attrVsDefaultValue</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sx&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;sy&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;sz&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;rx&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ry&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;rz&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tx&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ty&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tz&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

<span class="n">sel</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="n">sl</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">sel</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrVsDefaultValue</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mc</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="n">attrVsDefaultValue</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
</pre></div>


<p>Cheers!&nbsp;-Markus</p>
<p><strong><a href="#88" title="2013-11-07 13:50:38">Chris Lesage</a>:</strong> Thanks Markus! Your version also respects undo/redo. I&#8217;ll have to take a look at mine and remember why I used Callback. :) (Also, it looks like my comments don&#8217;t keep tabs in the formatting. I&#8217;ll see if I can sort that out.&nbsp;Fixed.)</p>
  
  <div class="tag-cloud">
    <p>
      <a href="http://chris-lesage.github.io/tag/animtip.html">animtip</a>
      <a href="http://chris-lesage.github.io/tag/hotkeys.html">hotkeys</a>
      <a href="http://chris-lesage.github.io/tag/maya.html">maya</a>
      <a href="http://chris-lesage.github.io/tag/pymel.html">pymel</a>
      <a href="http://chris-lesage.github.io/tag/python.html">python</a>
      <a href="http://chris-lesage.github.io/tag/rigtip.html">rigtip</a>
    </p>
  </div>
</article>

    <footer>
        <nav>
          <a href="http://chris-lesage.github.io">Home</a>
          <a href="http://chris-lesage.github.io/archives.html">Archives</a>
          <a href="http://chris-lesage.github.io/categories.html">Categories</a>
          <a href="http://chris-lesage.github.io/feeds/all.atom.xml">Atom</a>
        </nav>

      <p>&copy; 2016 Chris Lesage - Rigmarole Blog&#12288;&mdash;&#12288;<a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>

    </footer>
  </main>





<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "Maya Python: Reset Selected Controls",
  "headline": "Maya Python: Reset Selected Controls",
  "datePublished": "2013-10-01 21:54:00-04:00",
  "dateModified": "2013-10-01 21:54:00-04:00",
  "author": {
    "@type": "Person",
    "name": "Chris Lesage",
    "url": "http://chris-lesage.github.io/pages/about/"
  },
  "image": "{{ SITEURL }}/{{ THEME_STATIC_DIR }}/img/profile.png",
  "url": "http://chris-lesage.github.io/python/maya-python-reset-selected-controls/",
  "description": "I have a script snippet to share with you today. This is how I quickly reset all selected objects to 0,0,0,0,0,0,1,1,1 in translate, rotate and scale with the stroke of a hotkey command. This is fantastically useful when you are animating! But it’s also for riggers, modellers or anyone working in Maya. Softimage XSI has this feature built in (Ctrl-Shift-R), so I made a little snippet to do the same in ..."
}
</script></body>
</html>